import{M as c}from"./MigrationTool.c20e4c3c.js";import{l as d,C as p,D as r,B as n,O as e,J as a,ad as s,u as h,ac as i,Q as t,ab as u}from"./app.679154c9.js";import"./vendor.ed44d2cd.js";const _=n("p",null,"由于 Waline 在存储上完全复用了 Valine 的数据结构，所以从 Valine 迁移至 Waline 非常简单。",-1),k=n("code",null,"LEAN_ID",-1),m=n("code",null,"LEAN_KEY",-1),g=n("code",null,"LEAN_MASTER_KEY",-1),f=i(`<div class="custom-container warning"><p class="custom-container-title">注意</p><p>你需要替换 <code>new Valine</code> 为 <code>Waline.init</code>，并在配置中删除 Valine 的 <code>appId</code> 和 <code>appKey</code>，并添加 <code>serverURL</code>。</p></div><div class="language-diff" data-ext="diff"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> &lt;script src=&#39;//unpkg.com/valine/dist/Valine.min.js&#39;&gt;&lt;/script&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> &lt;script src=&#39;//unpkg.com/@waline/client@v2/dist/waline.js&#39;&gt;&lt;/script&gt;
</span><span class="token prefix inserted">+</span><span class="token line"> &lt;link href=&#39;//unpkg.com/@waline/client@v2/dist/waline.css&#39; rel=&#39;stylesheet&#39; /&gt;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;script&gt;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  new Valine({
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  Waline.init({
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   el: &#39;#vcomments&#39;,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   appId: &#39;Your appId&#39;,
</span><span class="token prefix deleted">-</span><span class="token line">   appKey: &#39;Your appKey&#39;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   serverURL: &#39;YOUR SERVER URL&#39;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> });
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/script&gt;
</span></span></code></pre></div>`,2),E={class:"custom-container tip"},x=i('<p class="custom-container-title">配置</p><p>Waline V2 已经移除了 Valine 支持进而转向更好的配置方案。以下是部分选项的迁移概要:</p><ul><li><code>placeholder</code>: 使用 <code>locales.placeholder</code></li><li><code>highlight</code>: 使用 <code>highlighter</code></li><li><code>avatarForce</code>, <code>avatar</code>: 使用服务端的 <code>AVATAR_PROXY</code> 环境变量</li><li><code>recordIP</code>: 不再显示用户 IP，同时在服务端提供 <code>DISABLE_USERAGENT</code> 环境变量</li><li><code>requiredFields</code>: 重命名为 <code>requiredMeta</code></li><li><code>langMode</code>: 重命名为 <code>locales</code></li><li><code>emojiCDN</code>, <code>emojiMap</code>: 使用更强大的 <code>emoji</code> 选项</li></ul>',3),A=i('<div class="custom-container tip"><p class="custom-container-title">使用国内版 Leancloud</p><p>如果你是 Leancloud 国内版用户的话，除了 <code>LEAN_ID</code>、 <code>LEAN_KEY</code> 和 <code>LEAN_MASTER_KEY</code> 之外，还需要设置 <code>LEAN_SERVER</code> 环境变量，值为你的应用后台绑定的接入域名。</p></div><h2 id="迁移至-cloudbase" tabindex="-1"><a class="header-anchor" href="#迁移至-cloudbase" aria-hidden="true">#</a> 迁移至 Cloudbase</h2><p>如果你想要将你的 Valine 数据迁移至腾讯云开发的云数据库中的话，可以使用 LeanCloud 的导出功能配合云数据库的导入功能完成。在 LeanCloud 后台选择 <kbd>导入导出</kbd> &gt; <kbd>限定 Class</kbd> &gt; <kbd>Comment</kbd> &gt; <kbd>导出</kbd>，之后会收到导出成功的邮件。</p>',3),v={href:"https://console.cloud.tencent.com/tcb/db/index",target:"_blank",rel:"noopener noreferrer"},b=n("code",null,"Comment",-1),L=n("kbd",null,"新建集合",-1),V=i('<h2 id="waline-亮点" tabindex="-1"><a class="header-anchor" href="#waline-亮点" aria-hidden="true">#</a> Waline 亮点</h2><p>Waline 相对于 Valine 具有如下亮点:</p><h3 id="更强大的功能" tabindex="-1"><a class="header-anchor" href="#更强大的功能" aria-hidden="true">#</a> 更强大的功能</h3><ol><li>Markdown 支持更多语法，包括上下角标、emoji、表格、删除线、数学公式、HTML 标签、脚注等。</li><li>图片上传功能，允许自由配置图床服务或直接嵌入图片。</li><li>全新的标签系统，可以根据用户互动频率为用户设置等级标签，也可为登录用户添加自定义标签。</li><li>Emoji 预设与选项卡支持，允许多套 Emoji，同时允许任何人发布和使用 Emoji 预设。</li><li>全新的反应系统，允许访客表达对文章的态度。</li><li>评论点赞，对喜欢的评论表达支持。</li><li>浏览量统计，更加准确的浏览量计数与防篡改。</li><li>表情包搜索。可以自定义表情包服务，让用户搜索并自由插入表情包。</li><li>支持登录用户编辑和删除其发布的评论。</li></ol><h3 id="更安全" tabindex="-1"><a class="header-anchor" href="#更安全" aria-hidden="true">#</a> 更安全</h3><ol><li>零隐私泄露，不会暴露用户邮箱、IP 地址以及其他敏感信息，并且可以在后台配置不显示用户地理位置、浏览器以及操作系统。</li><li>完整的反垃圾和防灌水系统。 <ul><li>所有评论都可以通过反垃圾服务进行鉴别，并且可以添加自己的额外验证逻辑。</li><li>可设置单 IP 或者单用户的评论速度限制，并自动识别重复评论，防止灌水。</li></ul></li><li>评论审核功能，在敏感时期或者网站受到攻击时，可以一键开启评论审核，手动审查并批准评论显示，防止恶意评论导致封站。</li><li>支持用户登录，除了注册账号外，还支持社交媒体账号一键授权登录，快速同步头像与昵称，防止身份冒用</li></ol><h3 id="更方便" tabindex="-1"><a class="header-anchor" href="#更方便" aria-hidden="true">#</a> 更方便</h3><ol><li>多种方式 (QQ、微信、钉钉、邮箱) 等通知博主评论动态</li><li>强大的管理后台，可以查看所有用户与评论并进行相关操作，同时为用户设置自定义标签与管理员</li><li>前端管理，管理员可以直接通过 Waline 评论组件审查、编辑或删除评论。</li></ol>',8),R=d({__name:"valine.html",setup(C){return(N,I)=>{const l=t("RouterLink"),o=t("ExternalLinkIcon");return p(),r("div",null,[_,n("ol",null,[n("li",null,[n("p",null,[e("按照 "),a(l,{to:"/guide/get-started.html#vercel-%E9%83%A8%E7%BD%B2-%E6%9C%8D%E5%8A%A1%E7%AB%AF"},{default:s(()=>[e("Vercel 部署")]),_:1}),e(" 一节部署服务端。"),k,e(" 和 "),m,e(" 和之前使用 Valine 申请的保持一致即可。同时请不要忘记为 Waline 设置 "),g,e("。")])]),n("li",null,[n("p",null,[e("按照 "),a(l,{to:"/guide/get-started.html#html-%E5%BC%95%E5%85%A5-%E5%AE%A2%E6%88%B7%E7%AB%AF"},{default:s(()=>[e("HTML 片段")]),_:1}),e(" 一节修改对应的前端脚本。")]),f])]),n("div",E,[x,n("p",null,[e("Waline 具体的配置详见 "),a(l,{to:"/reference/client.html"},{default:s(()=>[e("客户端配置")]),_:1}),e("。你也可以查看 "),a(l,{to:"/migration/client.html"},{default:s(()=>[e("Waline 客户端 V2 迁移指南")]),_:1}),e(" 来了解与 Valine 不兼容的选项。")])]),A,n("p",null,[e("将导出成功的文件内容粘贴至下方的文本框中，点击下方的转换按钮，获得待导入的文件。进入 "),n("a",v,[e("腾讯云开发后台 → 数据库"),a(o)]),e(" 界面，选择 "),b,e(" 集合。若该集合不存在，点击左上角 "),L,e(" 创建。进入后点击上方的导入按钮，选择刚才获得的转换后文件稍待片刻即可完成导入。")]),a(h(c)),V])}}}),M=u(R,[["__file","valine.html.vue"]]);export{M as default};
