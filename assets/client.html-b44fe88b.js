import{_ as e,X as a,Y as n,a0 as o}from"./framework-4b90706e.js";const s={},i=o(`<h2 id="api-changes" tabindex="-1"><a class="header-anchor" href="#api-changes" aria-hidden="true">#</a> API changes</h2><p>We removed Waline&#39;s default export and instead provide the following exports:</p><ul><li><code>init</code>: behave like the old <code>Waline</code></li><li><code>version</code>: version number</li><li><code>commentCount</code>: number of updated comments</li><li><code>pageviewCount</code>: update the number of visits</li><li><code>RecentComments</code>: recent comments</li></ul><p>We changed Waline&#39;s default export to <code>init</code> named export, and to make Waline SSR friendly, V2 exports CSS separately.</p><p>In most cases, this just means the following changes:</p><div class="language-diff" data-ext="diff"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> &lt;script src=&#39;//cdn.jsdelivr.net/npm/@waline/client&#39;&gt;&lt;/script&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> &lt;script src=&#39;//unpkg.com/@waline/client@v2/dist/waline.js&#39;&gt;&lt;/script&gt;
</span><span class="token prefix inserted">+</span><span class="token line"> &lt;link href=&#39;//unpkg.com/@waline/client@v2/dist/waline.css&#39; rel=&#39;stylesheet&#39; /&gt;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;script&gt;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  Waline({
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  Waline.init({
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   el: &#39;#waline&#39;,
</span><span class="token prefix unchanged"> </span><span class="token line">   serverURL: &#39;YOUR SERVER URL&#39;
</span><span class="token prefix unchanged"> </span><span class="token line"> });
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/script&gt;
</span></span></code></pre></div><h2 id="options-added" tabindex="-1"><a class="header-anchor" href="#options-added" aria-hidden="true">#</a> Options Added</h2><ul><li>The <code>comment</code> option supports setting strings as CSS selectors.</li><li>The <code>pageview</code> option supports setting strings as CSS selectors.</li></ul><h2 id="options-renamed" tabindex="-1"><a class="header-anchor" href="#options-renamed" aria-hidden="true">#</a> Options Renamed</h2><ul><li><p><code>uploadImage</code> renamed to <code>imageUploader</code></p></li><li><p><code>highlight</code> renamed to <code>highlighter</code></p></li><li><p><code>previewMath</code> renamed to <code>texRenderer</code></p></li><li><p><code>visitor</code> renamed to <code>pageview</code></p></li></ul><h2 id="options-removed" tabindex="-1"><a class="header-anchor" href="#options-removed" aria-hidden="true">#</a> Options Removed</h2><p>The following options have long been marked as deprecated APIs in V1, they have been removed in V2.</p><ul><li><code>langMode</code>: use <code>locales</code></li><li><code>placeholder</code>: use <code>locales.placeholder</code></li><li><code>emojiCDN</code>: use <code>emoji</code></li><li><code>emojiMaps</code>: use <code>emoji</code></li><li><code>requiredFields</code>: use <code>requiredMeta</code></li><li><code>avatar</code>: use server variable <code>AVATAR_PROXY</code></li><li><code>avatarCDN</code>: use server variable <code>AVATAR_PROXY</code></li><li><code>avatarForce</code>: refresh by default</li><li><code>anonymous</code>: use <code>login</code></li><li><code>mathTagSupport</code>: use <code>texRenderer</code></li><li><code>copyRight</code>: use <code>copyright</code></li></ul><h2 id="other-changes" tabindex="-1"><a class="header-anchor" href="#other-changes" aria-hidden="true">#</a> Other changes</h2><h3 id="instance" tabindex="-1"><a class="header-anchor" href="#instance" aria-hidden="true">#</a> Instance</h3><p><code>Waline.init</code> now throws an error when the two required properties <code>el</code>, <code>serverURL</code> are invalid, instead of returning an error instance with reason.</p><p>You can use <code>try { ... } catch (err) { ... }</code> blocks to catch errors for better compatibility in case that user sets invalid options.</p><h3 id="update-behavior-changes" tabindex="-1"><a class="header-anchor" href="#update-behavior-changes" aria-hidden="true">#</a> Update behavior changes</h3><ul><li>Waline now supports updating all options except the <code>el</code> option via <code>Instance.update</code>.</li><li><code>path</code> parameter will reset on <code>update()</code>, which means as long as you don&#39;t pass <code>path</code> options during <code>update()</code>, it will be <code>window.location.pathname</code>.</li></ul><h3 id="comments-and-pageview-selector-changes" tabindex="-1"><a class="header-anchor" href="#comments-and-pageview-selector-changes" aria-hidden="true">#</a> Comments and Pageview Selector Changes</h3><p>Comments and views on Valine&#39;s selector compatibility have now been removed.</p><ul><li>The comment selector defaults to <code>&#39;.waline-comment-count&#39;</code></li><li>The pageview selector defaults to <code>&#39;.waline-pageview-count&#39;</code></li></ul><p>If you need to get a different value for a selector than the current page, it is strongly recommended to use the <code>data-path</code> attribute.</p><p>For compatibility, we still keep the previous <code>id</code> attribute support, but this compatibility will be removed in V3.</p><h3 id="css-class-changes" tabindex="-1"><a class="header-anchor" href="#css-class-changes" aria-hidden="true">#</a> CSS class changes</h3><p>All CSS classes changed from <code>v</code> to <code>wl-</code>.</p>`,26),t=[i];function d(c,l){return a(),n("div",null,t)}const p=e(s,[["render",d],["__file","client.html.vue"]]);export{p as default};
