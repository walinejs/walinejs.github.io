import{C as u,ab as g,s as m,m as e,ac as $,aM as b,A as a,V as d,U as f}from"./app-ChF-ze19.js";const o=class o extends u{constructor(){super(...arguments),this.Xh=""}onSetup(){this.a=m(),this.Mb(),this.Wh(),this.Ca(),this.Ea()}onAttach(t){t.style.setProperty("pointer-events","none"),e(this.kf.bind(this)),e(this.Mb.bind(this)),e(this.Wh.bind(this)),e(this.Ca.bind(this)),e(this.Ea.bind(this));const{started:s}=this.a.$state;this.setAttributes({"data-visible":()=>!s()&&!this.$state.hidden(),"data-loading":this.Pc.bind(this),"data-error":this.fb.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){e(this.Im.bind(this)),e(this.Ma.bind(this))}fb(){const{error:t}=this.$state;return!$(t())}Im(){const{canLoadPoster:t,poster:s}=this.a.$state;!t()&&s()&&b(s(),"preconnect")}Ea(){const{src:t}=this.$props,{poster:s,nativeControls:i}=this.a.$state;this.el&&a(this.el,"display",i()?"none":null),this.$state.hidden.set(this.fb()||!(t()||s())||i())}Pc(){const{loading:t,hidden:s}=this.$state;return!s()&&t()}kf(){const t=this.$state.img();t&&(d(t,"load",this.gd.bind(this)),d(t,"error",this.Q.bind(this)))}Mb(){const{poster:t}=this.a.$props,{canLoadPoster:s,providedPoster:i,inferredPoster:r}=this.a.$state,n=this.$props.src()||"",l=n||t()||r();this.Xh===i()&&i.set(n),this.$state.src.set(s()&&l.length?l:null),this.Xh=n}Wh(){const{src:t}=this.$props,{alt:s}=this.$state,{poster:i}=this.a.$state;s.set(t()||i()?this.$props.alt():null)}Ca(){const{crossOrigin:t}=this.$props,{crossOrigin:s}=this.$state,{crossOrigin:i,poster:r}=this.a.$state,n=t()!==null?t():i();s.set(/ytimg\.com|vimeo/.test(r()||"")?null:n===!0?"anonymous":n)}Ma(){const{loading:t,error:s}=this.$state,{canLoadPoster:i,poster:r}=this.a.$state;t.set(i()&&!!r()),s.set(null)}gd(){const{loading:t,error:s}=this.$state;t.set(!1),s.set(null)}Q(t){const{loading:s,error:i}=this.$state;s.set(!1),i.set(t)}};o.props={src:null,alt:null,crossOrigin:null},o.state=new g({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});let c=o;const h=class h extends f(HTMLElement,c){constructor(){super(...arguments),this.Wm=document.createElement("img")}onSetup(){this.$state.img.set(this.Wm)}onConnect(){const{src:t,alt:s,crossOrigin:i}=this.$state;e(()=>{const{loading:r,hidden:n}=this.$state;this.Wm.style.display=r()||n()?"none":""}),e(()=>{a(this.Wm,"alt",s()),a(this.Wm,"crossorigin",i()),a(this.Wm,"src",t())}),this.Wm.parentNode!==this&&this.prepend(this.Wm)}};h.tagName="media-poster",h.attrs={crossOrigin:"crossorigin"};let p=h;export{p as MediaPosterElement};
