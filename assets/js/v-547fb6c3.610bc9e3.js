"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9550],{5033:(e,n,l)=>{l.r(n),l.d(n,{data:()=>t});const t={key:"v-547fb6c3",path:"/guide/server/aliyun-fc.html",title:"阿里云函数计算部署",lang:"zh-CN",frontmatter:{title:"阿里云函数计算部署",icon:"aliyun",head:[["meta",{property:"og:url",content:"https://waline.js.org/guide/server/aliyun-fc.html"}],["meta",{property:"og:title",content:"阿里云函数计算部署"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"og:locale:alternate",content:"en-US"}],["meta",{name:"twitter:card",content:"summary_large_image"}]]},excerpt:"",headers:[{level:2,title:"如何部署",slug:"如何部署",children:[{level:3,title:"Windows 环境缺少 VC++",slug:"windows-环境缺少-vc",children:[]},{level:3,title:"缺少 Python",slug:"缺少-python",children:[]}]},{level:2,title:"如何更新",slug:"如何更新",children:[]},{level:2,title:"如何修改环境变量",slug:"如何修改环境变量",children:[]}],git:{createdTime:1644942916e3,updatedTime:1644942916e3,contributors:[{name:"Mr.Hope",email:"zhangbowang1998@gmail.com",commits:1}]},readingTime:{minutes:2.99,words:896},filePathRelative:"guide/server/aliyun-fc.md"}},1344:(e,n,l)=>{l.r(n),l.d(n,{default:()=>ke});var t=l(8917),a=l(7548),r=l(3038),o=l(8065),i=l(6148),s=l(2589),c=l(7202),p=l(1447),u=l(5141);const d={href:"https://fc.console.aliyun.com/",target:"_blank",rel:"noopener noreferrer"},h=(0,t.Uk)("阿里云函数计算"),g=(0,t.Uk)(" 是阿里云推出的 Serverless 平台。我们可以快速的将 Waline 部署到阿里云函数计算平台上。"),m=(0,t._)("h2",{id:"如何部署",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#如何部署","aria-hidden":"true"},"#"),(0,t.Uk)(" 如何部署")],-1),_={href:"https://github.com/walinejs/aliyun-fc-starter/generate",target:"_blank",rel:"noopener noreferrer"},k=(0,t.Uk)("aliyun-fc-starter"),f=(0,t.Uk)(" 访问该地址基于官方模板创建仓库并将其克隆下来"),y=(0,t._)("p",null,[(0,t._)("img",{src:a,alt:"阿里云函数计算1"}),(0,t._)("br"),(0,t._)("img",{src:r,alt:"阿里云函数计算2"})],-1),b=(0,t.uE)('<li><p>全局安装 Serverless Devs 开发者工具 <code>npm install -g @serverless-devs/s</code></p><p><img src="'+o+'" alt="阿里云函数计算3"></p></li><li><p>https://ram.console.aliyun.com/manage/ak 访问该网址获取到你账户的一对密钥，使用 s 命令添加。 <img src="'+i+'" alt="阿里云函数计算4"><img src="'+s+'" alt="阿里云函数计算5"></p></li><li><p>进入目录后执行 <code>s deploy</code> 稍待片刻后完成一次部署，此时控制台中红框展示的地址即为你最终的 serverURL</p><p><img src="'+c+'" alt="阿里云函数计算6"></p></li>',3),U=(0,t.Uk)("点击“"),v={href:"https://fcnext.console.aliyun.com/cn-beijing/services/Waline/function-detail/Waline/LATEST?tab=config",target:"_blank",rel:"noopener noreferrer"},x=(0,t.Uk)("编辑环境变量"),w=(0,t.Uk)("”更新我们需要添加的环境变量并点击底部的保存按钮"),W=(0,t._)("p",null,[(0,t._)("img",{src:p,alt:"阿里云函数计算7"})],-1),j=(0,t.Uk)("点击“"),C={href:"https://fcnext.console.aliyun.com/cn-beijing/services/Waline/function-detail/Waline/LATEST?tab=code",target:"_blank",rel:"noopener noreferrer"},T=(0,t.Uk)("代码编辑"),P=(0,t.Uk)("”进入编辑页，在编辑器底部的控制台中输入 "),S=(0,t._)("code",null,"npm install",-1),E=(0,t.Uk)(" 安装依赖。安装完成之后点击顶部的"),L=(0,t._)("kbd",null,"部署",-1),V=(0,t.Uk)("按钮重新部署"),A=(0,t._)("p",null,[(0,t._)("img",{src:u,alt:"阿里云函数计算8"})],-1),N=(0,t._)("p",null,"至此就完成了部署，第四步中返回的地址即为你的部署地址。",-1),q=(0,t._)("h3",{id:"windows-环境缺少-vc",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#windows-环境缺少-vc","aria-hidden":"true"},"#"),(0,t.Uk)(" Windows 环境缺少 VC++")],-1),z=(0,t.Uk)("由于 @serverless-devs/s 依赖于 node-gyp ，根据 "),D={href:"https://github.com/nodejs/node-gyp#on-windows",target:"_blank",rel:"noopener noreferrer"},H=(0,t.Uk)("https://github.com/nodejs/node-gyp#on-windows"),O=(0,t.Uk)("，我们需要安装 VC++环境。"),R=(0,t._)("blockquote",null,[(0,t._)("p",null,[(0,t.Uk)("值得注意的是，VC++ 环境需要占用大量的存储资源，因此我更建议你使用 "),(0,t._)("em",null,"Windows Subsystem for Linux"),(0,t.Uk)(" 或 Linux 云服务器")])],-1),Y=(0,t.Uk)("前往 "),M={href:"https://visualstudio.microsoft.com",target:"_blank",rel:"noopener noreferrer"},F=(0,t.Uk)("https://visualstudio.microsoft.com"),G=(0,t.Uk)(" 下载 Visual Studio 安装包"),I=(0,t._)("li",null,[(0,t.Uk)("在安装包中勾选 "),(0,t._)("em",null,"使用 C++的桌面开发"),(0,t.Uk)(" ，勾选全部 MSVC 套件，开始安装。")],-1),Z=(0,t._)("li",null,[(0,t.Uk)("使用 "),(0,t._)("code",null,"npm config set msvs_version 2022"),(0,t.Uk)(" 设置版本信息，例如我下载的 Visual Studio Community 2022，即需填写 2022 版本")],-1),B=(0,t._)("li",null,[(0,t.Uk)("继续 "),(0,t._)("code",null,"s deplay"),(0,t.Uk)(" 的安装过程")],-1),J=(0,t._)("h3",{id:"缺少-python",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#缺少-python","aria-hidden":"true"},"#"),(0,t.Uk)(" 缺少 Python")],-1),K=(0,t.Uk)("由于 @serverless-devs/s 依赖于 node-gyp ，根据 "),Q={href:"https://github.com/nodejs/node-gyp#configuring-python-dependency",target:"_blank",rel:"noopener noreferrer"},X=(0,t.Uk)("https://github.com/nodejs/node-gyp#configuring-python-dependency"),$=(0,t.Uk)("，我们也需要安装 Python 环境。"),ee=(0,t.uE)('<blockquote><p>Python 作为一个优秀的脚本性语言，是很值得安装的。</p></blockquote><p>node-gyp 支持 3.7/3.8/3.9/3.10 版本的 Python，你可以通过搜索引擎获取大量的帮助，因此在此不申明详细步骤。</p><p>如果你的系统有多个 Python，那你需要使用以下命令指定使用 python 的路径。</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> python /path/to/executable/python\n</code></pre></div><p>如果 <code>NODE_GYP_FORCE_PYTHON</code> 环境变量被设置为 Python 可执行文件的路径，则将使用它而不是任何其他已配置或内置的 Python 。即使它不是兼容版本，也不会进行搜索。</p><h2 id="如何更新" tabindex="-1"><a class="header-anchor" href="#如何更新" aria-hidden="true">#</a> 如何更新</h2>',6),ne=(0,t.Uk)("点击“"),le={href:"https://fcnext.console.aliyun.com/cn-beijing/services/Waline/function-detail/Waline/LATEST?tab=config",target:"_blank",rel:"noopener noreferrer"},te=(0,t.Uk)("编辑环境变量"),ae=(0,t.Uk)("”更新我们需要添加的环境变量并点击底部的保存按钮"),re=(0,t._)("p",null,[(0,t._)("img",{src:p,alt:"阿里云函数计算7"})],-1),oe=(0,t._)("h2",{id:"如何修改环境变量",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#如何修改环境变量","aria-hidden":"true"},"#"),(0,t.Uk)(" 如何修改环境变量")],-1),ie=(0,t.Uk)("点击“"),se={href:"https://fcnext.console.aliyun.com/cn-beijing/services/Waline/function-detail/Waline/LATEST?tab=code",target:"_blank",rel:"noopener noreferrer"},ce=(0,t.Uk)("代码编辑"),pe=(0,t.Uk)("”进入编辑页，在编辑器底部的控制台中输入 "),ue=(0,t._)("code",null,"npm install",-1),de=(0,t.Uk)(" 安装依赖。安装完成之后点击顶部的"),he=(0,t._)("kbd",null,"部署",-1),ge=(0,t.Uk)("按钮重新部署"),me=(0,t._)("p",null,[(0,t._)("img",{src:u,alt:"阿里云函数计算8"})],-1),_e={},ke=(0,l(6959).Z)(_e,[["render",function(e,n){const l=(0,t.up)("ExternalLinkIcon");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("p",null,[(0,t._)("a",d,[h,(0,t.Wm)(l)]),g]),m,(0,t._)("ol",null,[(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("a",_,[k,(0,t.Wm)(l)]),f]),y]),b,(0,t._)("li",null,[(0,t._)("p",null,[U,(0,t._)("a",v,[x,(0,t.Wm)(l)]),w]),W]),(0,t._)("li",null,[(0,t._)("p",null,[j,(0,t._)("a",C,[T,(0,t.Wm)(l)]),P,S,E,L,V]),A])]),N,q,(0,t._)("p",null,[z,(0,t._)("a",D,[H,(0,t.Wm)(l)]),O]),R,(0,t._)("ol",null,[(0,t._)("li",null,[Y,(0,t._)("a",M,[F,(0,t.Wm)(l)]),G]),I,Z,B]),J,(0,t._)("p",null,[K,(0,t._)("a",Q,[X,(0,t.Wm)(l)]),$]),ee,(0,t._)("p",null,[ne,(0,t._)("a",le,[te,(0,t.Wm)(l)]),ae]),re,oe,(0,t._)("p",null,[ie,(0,t._)("a",se,[ce,(0,t.Wm)(l)]),pe,ue,de,he,ge]),me],64)}]])},7548:(e,n,l)=>{e.exports=l.p+"assets/img/aliyun-fc-1.c4a09313.jpg"},3038:(e,n,l)=>{e.exports=l.p+"assets/img/aliyun-fc-2.5d0877d2.jpg"},8065:(e,n,l)=>{e.exports=l.p+"assets/img/aliyun-fc-3.3d3605c8.jpg"},6148:(e,n,l)=>{e.exports=l.p+"assets/img/aliyun-fc-4.bada9180.jpg"},2589:(e,n,l)=>{e.exports=l.p+"assets/img/aliyun-fc-5.3137ea34.jpg"},7202:(e,n,l)=>{e.exports=l.p+"assets/img/aliyun-fc-6.09a0ec45.jpg"},1447:(e,n,l)=>{e.exports=l.p+"assets/img/aliyun-fc-7.3e9053aa.jpg"},5141:(e,n,l)=>{e.exports=l.p+"assets/img/aliyun-fc-8.e139b393.jpg"}}]);