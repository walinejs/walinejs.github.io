"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9550],{6340:(e,t,n)=>{n.r(t),n.d(t,{data:()=>a});const a={key:"v-547fb6c3",path:"/guide/server/aliyun-fc.html",title:"阿里云函数计算部署",lang:"zh-CN",frontmatter:{title:"阿里云函数计算部署",icon:"aliyun",head:[["meta",{property:"og:url",content:"https://waline.js.org/guide/server/aliyun-fc.html"}],["meta",{property:"og:title",content:"阿里云函数计算部署"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"og:locale:alternate",content:"en-US"}],["meta",{name:"twitter:card",content:"summary_large_image"}],["script",{type:"application/ld+json"},'{"@context":"https://schema.org","@type":"NewsArticle","headline":"阿里云函数计算部署","image":[""],"datePublished":"","dateModified":"","author":[]}']]},excerpt:"",headers:[{level:2,title:"如何部署",slug:"如何部署",children:[{level:3,title:"Windows 环境缺少 VC++",slug:"windows-环境缺少-vc",children:[]},{level:3,title:"缺少 Python",slug:"缺少-python",children:[]}]},{level:2,title:"如何更新",slug:"如何更新",children:[]},{level:2,title:"如何修改环境变量",slug:"如何修改环境变量",children:[]}],git:{createdTime:1644683949e3,updatedTime:1644683949e3,contributors:[{name:"Mr.Hope",email:"zhangbowang1998@gmail.com",commits:1}]},readingTime:{minutes:2.72,words:816},filePathRelative:"guide/server/aliyun-fc.md"}},6435:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(8917),o=n(7583),r=n(8348),i=n(7181),s=n(9113),l=n(6240),c=n(1879),p=n(4507),d=n(6029);const h=(0,a.uE)('<p><a href="https://fc.console.aliyun.com/" target="_blank" rel="noopener noreferrer">阿里云函数计算</a> 是阿里云推出的 Serverless 平台。我们可以快速的将 Waline 部署到阿里云函数计算平台上。</p><h2 id="如何部署" tabindex="-1"><a class="header-anchor" href="#如何部署" aria-hidden="true">#</a> 如何部署</h2><ol><li><a href="https://github.com/walinejs/aliyun-fc-starter/generate" target="_blank" rel="noopener noreferrer">aliyun-fc-starter</a> 访问该地址基于官方模板创建仓库并将其克隆下来 <img src="'+o+'" alt=""><br><img src="'+r+'" alt=""></li><li>全局安装 Serverless Devs 开发者工具 <code>npm install -g @serverless-devs/s</code><img src="'+i+'" alt=""></li><li>https://ram.console.aliyun.com/manage/ak 访问该网址获取到你账户的一对密钥，使用 s 命令添加。 <img src="'+s+'" alt=""><img src="'+l+'" alt=""></li><li>进入目录后执行 <code>s deploy</code> 稍待片刻后完成一次部署，此时控制台中红框展示的地址即为你最终的 serverURL <img src="'+c+'" alt=""></li><li>点击“<a href="https://fcnext.console.aliyun.com/cn-beijing/services/Waline/function-detail/Waline/LATEST?tab=config" target="_blank" rel="noopener noreferrer">编辑环境变量</a>”更新我们需要添加的环境变量并点击底部的保存按钮 <img src="'+p+'" alt=""></li><li>点击“<a href="https://fcnext.console.aliyun.com/cn-beijing/services/Waline/function-detail/Waline/LATEST?tab=code" target="_blank" rel="noopener noreferrer">代码编辑</a>”进入编辑页，在编辑器底部的控制台中输入 <code>npm install</code> 安装依赖。安装完成之后点击顶部的<kbd>部署</kbd>按钮重新部署 <img src="'+d+'" alt=""></li></ol><p>至此就完成了部署，第四步中返回的地址即为你的部署地址。</p><h3 id="windows-环境缺少-vc" tabindex="-1"><a class="header-anchor" href="#windows-环境缺少-vc" aria-hidden="true">#</a> Windows 环境缺少 VC++</h3><p>由于 @serverless-devs/s 依赖于 node-gyp ，根据<a href="https://github.com/nodejs/node-gyp#on-windows" target="_blank" rel="noopener noreferrer">https://github.com/nodejs/node-gyp#on-windows</a>，我们需要安装 VC++环境。</p><blockquote><p>值得注意的是，VC++ 环境需要占用大量的存储资源，因此我更建议你使用 <em>Windows Subsystem for Linux</em> 或 Linux 云服务器</p></blockquote><ol><li>前往<a href="https://visualstudio.microsoft.com" target="_blank" rel="noopener noreferrer">https://visualstudio.microsoft.com</a>下载 Visual Studio 安装包</li><li>在安装包中勾选 <em>使用 C++的桌面开发</em> ，勾选全部 MSVC 套件，开始安装。</li><li>使用<code>npm config set msvs_version 2022</code>设置版本信息，例如我下载的 Visual Studio Community 2022，即需填写 2022 版本</li><li>继续<code>s deplay</code>的安装过程</li></ol><h3 id="缺少-python" tabindex="-1"><a class="header-anchor" href="#缺少-python" aria-hidden="true">#</a> 缺少 Python</h3><p>由于 @serverless-devs/s 依赖于 node-gyp ，根据<a href="https://github.com/nodejs/node-gyp#configuring-python-dependency" target="_blank" rel="noopener noreferrer">https://github.com/nodejs/node-gyp#configuring-python-dependency</a>，我们也需要安装 Python 环境。</p><blockquote><p>Python 作为一个优秀的脚本性语言，是很值得安装的。</p></blockquote><p>node-gyp 支持 3.7/3.8/3.9/3.10 版本的 Python，你可以通过搜索引擎获取大量的帮助，因此在此不申明详细步骤。</p><p>如果你的系统有多个 Python，那你需要使用以下命令指定使用 python 的路径。</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> python /path/to/executable/python\n</code></pre></div><p>如果 <code>NODE_GYP_FORCE_PYTHON</code> 环境变量被设置为 Python 可执行文件的路径，则将使用它而不是任何其他已配置或内置的 Python 。即使它不是兼容版本，也不会进行搜索。</p><h2 id="如何更新" tabindex="-1"><a class="header-anchor" href="#如何更新" aria-hidden="true">#</a> 如何更新</h2><p>点击“<a href="https://fcnext.console.aliyun.com/cn-beijing/services/Waline/function-detail/Waline/LATEST?tab=config" target="_blank" rel="noopener noreferrer">编辑环境变量</a>”更新我们需要添加的环境变量并点击底部的保存按钮</p><p><img src="'+p+'" alt=""></p><h2 id="如何修改环境变量" tabindex="-1"><a class="header-anchor" href="#如何修改环境变量" aria-hidden="true">#</a> 如何修改环境变量</h2><p>点击“<a href="https://fcnext.console.aliyun.com/cn-beijing/services/Waline/function-detail/Waline/LATEST?tab=code" target="_blank" rel="noopener noreferrer">代码编辑</a>”进入编辑页，在编辑器底部的控制台中输入 <code>npm install</code> 安装依赖。安装完成之后点击顶部的<kbd>部署</kbd>按钮重新部署</p><p><img src="'+d+'" alt=""></p>',21),g={},u=(0,n(6959).Z)(g,[["render",function(e,t){return h}]])},7583:(e,t,n)=>{e.exports=n.p+"assets/img/aliyun-fc-1.c4a09313.jpg"},8348:(e,t,n)=>{e.exports=n.p+"assets/img/aliyun-fc-2.5d0877d2.jpg"},7181:(e,t,n)=>{e.exports=n.p+"assets/img/aliyun-fc-3.3d3605c8.jpg"},9113:(e,t,n)=>{e.exports=n.p+"assets/img/aliyun-fc-4.bada9180.jpg"},6240:(e,t,n)=>{e.exports=n.p+"assets/img/aliyun-fc-5.3137ea34.jpg"},1879:(e,t,n)=>{e.exports=n.p+"assets/img/aliyun-fc-6.09a0ec45.jpg"},4507:(e,t,n)=>{e.exports=n.p+"assets/img/aliyun-fc-7.3e9053aa.jpg"},6029:(e,t,n)=>{e.exports=n.p+"assets/img/aliyun-fc-8.e139b393.jpg"}}]);