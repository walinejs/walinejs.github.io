"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5221],{721:(n,a,s)=>{s.r(a),s.d(a,{data:()=>t});const t={key:"v-2945f13a",path:"/en/advanced/faq.html",title:"FAQ",lang:"en-US",frontmatter:{title:"FAQ",icon:"faq",head:[["meta",{property:"og:url",content:"https://waline.js.org/en/advanced/faq.html"}],["meta",{property:"og:title",content:"FAQ"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:locale",content:"en-US"}],["meta",{property:"og:locale:alternate",content:"zh-CN"}],["meta",{name:"twitter:card",content:"summary_large_image"}],["script",{type:"application/ld+json"},'{"@context":"https://schema.org","@type":"NewsArticle","headline":"FAQ","image":[""],"datePublished":"","dateModified":"","author":[]}']]},excerpt:"",headers:[{level:2,title:"What is the relationship with Valine?",slug:"what-is-the-relationship-with-valine",children:[]},{level:2,title:"Do I still need to deploy Valine-Admin on LeanCloud?",slug:"do-i-still-need-to-deploy-valine-admin-on-leancloud",children:[]},{level:2,title:"How can I upgrade?",slug:"how-can-i-upgrade",children:[{level:3,title:"Frontend",slug:"frontend",children:[]},{level:3,title:"Server",slug:"server",children:[]}]},{level:2,title:"why posting comments are slow?",slug:"why-posting-comments-are-slow",children:[]},{level:2,title:"How to add lightbox effects?",slug:"how-to-add-lightbox-effects",children:[{level:3,title:"lightGallery",slug:"lightgallery",children:[]},{level:3,title:"Slimbox2",slug:"slimbox2",children:[]},{level:3,title:"lightbox2",slug:"lightbox2",children:[]},{level:3,title:"Fancybox",slug:"fancybox",children:[]}]}],git:{createdTime:1644685118e3,updatedTime:1644685118e3,contributors:[{name:"Mr.Hope",email:"zhangbowang1998@gmail.com",commits:1}]},readingTime:{minutes:2.88,words:863},filePathRelative:"en/advanced/faq.md"}},3012:(n,a,s)=>{s.r(a),s.d(a,{default:()=>u});var t=s(8917),e=s(5146),p=s(2177);const o=(0,t.uE)('<p>Waline has a very clear position since its birth:</p><blockquote><p>A <strong>simple</strong> comment system <strong>with backend</strong>.</p></blockquote><p>All versions released afterwards are modifications made around this position.</p><h2 id="what-is-the-relationship-with-valine" tabindex="-1"><a class="header-anchor" href="#what-is-the-relationship-with-valine" aria-hidden="true">#</a> What is the relationship with Valine?</h2><p>Waline = <strong>W</strong>ith backend V<strong>aline</strong></p><p>Consulting with the open source version of Valine, the comment list in frontend is rewritten with React. The style and structure as well as some internal tools and methods are all from Valine.</p><h2 id="do-i-still-need-to-deploy-valine-admin-on-leancloud" tabindex="-1"><a class="header-anchor" href="#do-i-still-need-to-deploy-valine-admin-on-leancloud" aria-hidden="true">#</a> Do I still need to deploy Valine-Admin on LeanCloud?</h2><p>No. Waline is a three-in-one deployment of data storage, server, and client. The server interface is already equivalent to Valine&#39;s LeanCloud cloud engine. The server already includes comment management and email notifications feature provided by the previous cloud engine. It doesn&#39;t need the additional LeanCloud cloud engine, so it won&#39;t be restricted by the LeanCloud cloud engine&#39;s sleep strategy.</p><h2 id="how-can-i-upgrade" tabindex="-1"><a class="header-anchor" href="#how-can-i-upgrade" aria-hidden="true">#</a> How can I upgrade?</h2><p>Waline is mainly composed of two parts: the frontend and the server.</p><h3 id="frontend" tabindex="-1"><a class="header-anchor" href="#frontend" aria-hidden="true">#</a> Frontend</h3><p>The front end inserts comment lists and comment boxes by including JS scripts in the web page. In most scenarios, the link will use the address of the latest version of the online CDN, and the latest version will be automatically applied, without the need for users to manually update.</p><div class="custom-container tip"><p class="custom-container-title">Need manually update in following situations</p><ol><li>The version number is forcibly specified in the CDN address. In this situation, you need to manually modify the version number to be the latest.</li><li>Use NPM to require and pack the module into code. In this situation, you need to modify the version number in the dependency to ensure that the latest version of the dependency can be obtained during installation.</li></ol></div><h3 id="server" tabindex="-1"><a class="header-anchor" href="#server" aria-hidden="true">#</a> Server</h3><p>The server refers to the backend service corresponding to the <code>serverURL</code> configured in frontend script, and its update will be slightly different depending on different deployment environments. Server updates will be more frequent.</p><h4 id="vercel" tabindex="-1"><a class="header-anchor" href="#vercel" aria-hidden="true">#</a> Vercel</h4><p>Go to the corresponding GitHub repository and modify the version number of <code>@waline/vercel</code> in the package.json file to the latest.</p><p><img src="'+e+'" alt="vercel"></p><h4 id="deta" tabindex="-1"><a class="header-anchor" href="#deta" aria-hidden="true">#</a> Deta</h4>',19),c=(0,t.Uk)("Deta - How to update?"),l=(0,t.uE)('<h4 id="cloudbase" tabindex="-1"><a class="header-anchor" href="#cloudbase" aria-hidden="true">#</a> CloudBase</h4><p>Enter the code editing page, click <kbd>Save and reinstall dependencies</kbd>. If it still doesnâ€™t work, enter <kbd>My Application</kbd> and select <kbd>Deploy</kbd> to redeploy.</p><div class="custom-container warning"><p class="custom-container-title">Note</p><p>Redeployment will clear the previous files. If there is a configuration in the previous file, it needs to be backed up first.</p></div><p><img src="'+p+'" alt="cloudBase"></p><h4 id="docker" tabindex="-1"><a class="header-anchor" href="#docker" aria-hidden="true">#</a> Docker</h4><p>Run <code>docker pull lizheming/waline</code> directly to pull the latest image.</p><h2 id="why-posting-comments-are-slow" tabindex="-1"><a class="header-anchor" href="#why-posting-comments-are-slow" aria-hidden="true">#</a> why posting comments are slow?</h2><p>Due to some technical reasons, spam detection and comment notification are all serial operations when posting comments. The spam detection uses the service provided by Akismet abroad, which may be slow to access. Users can turn off the spam detection function through the <code>AKISMET_KEY=false</code> environment variable. Beside the spam detection service, the email notification in the comment notification may also cause a timeout. You can turn off the comment notification to test whether it is caused by this feature.</p><h2 id="how-to-add-lightbox-effects" tabindex="-1"><a class="header-anchor" href="#how-to-add-lightbox-effects" aria-hidden="true">#</a> How to add lightbox effects?</h2><p>There has many plugin can implement it. Here we give a simple example for <a href="https://www.lightgalleryjs.com/" target="_blank" rel="noopener noreferrer">lightGallery</a>, <a href="https://www.digitalia.be/software/slimbox2/" target="_blank" rel="noopener noreferrer">Slimbox2</a>, <a href="https://lokeshdhakar.com/projects/lightbox2/" target="_blank" rel="noopener noreferrer">lightbox2</a> and <a href="https://fancyapps.com/docs/ui/fancybox/" target="_blank" rel="noopener noreferrer">Fancybox</a>.</p><h3 id="lightgallery" tabindex="-1"><a class="header-anchor" href="#lightgallery" aria-hidden="true">#</a> lightGallery</h3><p>Insert following code before <code>&lt;/head&gt;</code> tag in your html content. <code>#waline-coment</code> is your Waline comment element selector, you need replace it by yourself.</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>\n  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span>\n  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/lightgallery@2.1.5/css/lightgallery-bundle.css<span class="token punctuation">&quot;</span></span>\n<span class="token punctuation">/&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/lightgallery@2.1.5/lightgallery.umd.min.js<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token script"><span class="token language-javascript">\n<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>\n  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> imgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span>\n      <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&#39;#waline-comment .vcontent img&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> img<span class="token punctuation">.</span>width <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>imgs<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>gallery<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>gallery <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">lightGallery</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>gallery<span class="token punctuation">.</span><span class="token function">openGallery</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div><h3 id="slimbox2" tabindex="-1"><a class="header-anchor" href="#slimbox2" aria-hidden="true">#</a> Slimbox2</h3><p>Insert following code before <code>&lt;/head&gt;</code> tag in your html content. <code>#waline-coment</code> is your Waline comment element selector, you need replace it by yourself.</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>\n  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span>\n  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/gh/cbeyls/slimbox/css/slimbox2.css<span class="token punctuation">&quot;</span></span>\n<span class="token punctuation">/&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token script"><span class="token language-javascript">\n<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.jsdelivr.net/gh/cbeyls/slimbox/js/slimbox2.js&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>\n  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> imgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span>\n      <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&#39;#waline-comment .vcontent img&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> img<span class="token punctuation">.</span>width <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">const</span> idx <span class="token operator">=</span> imgs<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    $<span class="token punctuation">.</span><span class="token function">slimbox</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>src<span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>alt<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div><h3 id="lightbox2" tabindex="-1"><a class="header-anchor" href="#lightbox2" aria-hidden="true">#</a> lightbox2</h3><p>Insert following code before <code>&lt;/head&gt;</code> tag in your html content. <code>#waline-coment</code> is your Waline comment element selector, you need replace it by yourself.</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>\n  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span>\n  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/lightbox2@2.11.3/dist/css/lightbox.min.css<span class="token punctuation">&quot;</span></span>\n<span class="token punctuation">/&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/lightbox2@2.11.3/dist/js/lightbox-plus-jquery.min.js<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token script"><span class="token language-javascript">\n<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>\n  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> lightbox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lightbox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> imgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span>\n      <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&#39;#waline-comment .vcontent img&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> img<span class="token punctuation">.</span>width <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>imgs<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">const</span> $link <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;a /&gt;&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n      <span class="token literal-property property">href</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>src<span class="token punctuation">,</span>\n      <span class="token string-property property">&#39;data-title&#39;</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>alt<span class="token punctuation">,</span>\n      <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token string">&#39;lightbox&#39;</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    lightbox<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>$link<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div><h3 id="fancybox" tabindex="-1"><a class="header-anchor" href="#fancybox" aria-hidden="true">#</a> Fancybox</h3><p>Insert following code before <code>&lt;/head&gt;</code> tag in your html content. <code>#waline-coment</code> is your Waline comment element selector, you need replace it by yourself.</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token script"><span class="token language-javascript">\n<span class="token operator">&lt;</span>link\n  rel<span class="token operator">=</span><span class="token string">&quot;stylesheet&quot;</span>\n  href<span class="token operator">=</span><span class="token string">&quot;https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css&quot;</span>\n<span class="token operator">/</span><span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>\n  <span class="token function">Fancybox</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">&#39;#waline-comment .vcontent img&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div>',22),i={},u=(0,s(6959).Z)(i,[["render",function(n,a){const s=(0,t.up)("RouterLink");return(0,t.wg)(),(0,t.iD)(t.HY,null,[o,(0,t._)("p",null,[(0,t.Wm)(s,{to:"/en/guide/server/deta.html#how-to-update"},{default:(0,t.w5)((()=>[c])),_:1})]),l],64)}]])},2177:(n,a,s)=>{n.exports=s.p+"assets/img/cloudbase-update.0e0678ab.jpg"},5146:(n,a,s)=>{n.exports=s.p+"assets/img/vercel-update.24818433.png"}}]);