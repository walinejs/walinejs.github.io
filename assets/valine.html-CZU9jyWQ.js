const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MigrationTool-C_qVxe1S.js","assets/app-hYiCGIvL.js","assets/marked.esm-C5DfPZmz.js","assets/plugin-vue_export-helper-DlAUqK2U.js"])))=>i.map(i=>d[i]);
import{f as B,g as o,_ as d,c as r,d as i,e,a as F,w as E,b as a,r as C,o as A}from"./app-hYiCGIvL.js";import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";const D=B({__name:"valine.html",setup(t,{expose:u}){u();const l={MigrationTool:o(()=>d(()=>import("./MigrationTool-C_qVxe1S.js"),__vite__mapDeps([0,1,2,3])))};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),c={class:"hint-container tip"};function m(t,u,s,l,h,g){const n=C("RouteLink");return A(),r("div",null,[u[19]||(u[19]=i("p",null,"由于 Waline 在存储上完全复用了 Valine 的数据结构，所以从 Valine 迁移至 Waline 非常简单。",-1)),i("ol",null,[i("li",null,[i("p",null,[u[1]||(u[1]=e("按照 ")),F(n,{to:"/guide/get-started/#vercel-%E9%83%A8%E7%BD%B2-%E6%9C%8D%E5%8A%A1%E7%AB%AF"},{default:E(()=>u[0]||(u[0]=[e("Vercel 部署")])),_:1}),u[2]||(u[2]=e(" 一节部署服务端。")),u[3]||(u[3]=i("code",null,"LEAN_ID",-1)),u[4]||(u[4]=e(" 和 ")),u[5]||(u[5]=i("code",null,"LEAN_KEY",-1)),u[6]||(u[6]=e(" 和之前使用 Valine 申请的保持一致即可。同时请不要忘记为 Waline 设置 ")),u[7]||(u[7]=i("code",null,"LEAN_MASTER_KEY",-1)),u[8]||(u[8]=e("。"))])]),i("li",null,[i("p",null,[u[10]||(u[10]=e("按照 ")),F(n,{to:"/guide/get-started/#html-%E5%BC%95%E5%85%A5-%E5%AE%A2%E6%88%B7%E7%AB%AF"},{default:E(()=>u[9]||(u[9]=[e("HTML 片段")])),_:1}),u[11]||(u[11]=e(" 一节修改对应的前端脚本。"))]),u[12]||(u[12]=a(`<div class="hint-container warning"><p class="hint-container-title">注意</p><p>你需要替换 <code>new Valine</code> 为 <code>Waline.init</code>，并在配置中删除 Valine 的 <code>appId</code> 和 <code>appKey</code>，并添加 <code>serverURL</code>。</p></div><div class="language-diff line-numbers-mode" data-highlighter="shiki" data-ext="diff" data-title="diff" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">- &lt;script src=&#39;//unpkg.com/valine/dist/Valine.min.js&#39;&gt;&lt;/script&gt;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+ &lt;script src=&#39;//unpkg.com/@waline/client@v2/dist/waline.js&#39;&gt;&lt;/script&gt;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+ &lt;link href=&#39;//unpkg.com/@waline/client@v2/dist/waline.css&#39; rel=&#39;stylesheet&#39; /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;script&gt;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-  new Valine({</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+  Waline.init({</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    el: &#39;#vcomments&#39;,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-   appId: &#39;Your appId&#39;,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-   appKey: &#39;Your appKey&#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+   serverURL: &#39;YOUR SERVER URL&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;/script&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2))])]),i("div",c,[u[18]||(u[18]=a('<p class="hint-container-title">配置</p><p>Waline V2 已经移除了 Valine 支持进而转向更好的配置方案。以下是部分选项的迁移概要:</p><ul><li><code>placeholder</code>: 使用 <code>locales.placeholder</code></li><li><code>highlight</code>: 使用 <code>highlighter</code></li><li><code>avatarForce</code>, <code>avatar</code>: 使用服务端的 <code>AVATAR_PROXY</code> 环境变量</li><li><code>recordIP</code>: 不再显示用户 IP，同时在服务端提供 <code>DISABLE_USERAGENT</code> 环境变量</li><li><code>requiredFields</code>: 重命名为 <code>requiredMeta</code></li><li><code>langMode</code>: 重命名为 <code>locales</code></li><li><code>emojiCDN</code>, <code>emojiMap</code>: 使用更强大的 <code>emoji</code> 选项</li></ul>',3)),i("p",null,[u[15]||(u[15]=e("Waline 具体的配置详见 ")),F(n,{to:"/reference/client/api.html"},{default:E(()=>u[13]||(u[13]=[e("客户端配置")])),_:1}),u[16]||(u[16]=e("。你也可以查看 ")),F(n,{to:"/migration/v2.html"},{default:E(()=>u[14]||(u[14]=[e("Waline 客户端 V2 迁移指南")])),_:1}),u[17]||(u[17]=e(" 来了解与 Valine 不兼容的选项。"))])]),u[20]||(u[20]=a('<div class="hint-container tip"><p class="hint-container-title">使用国内版 Leancloud</p><p>如果你是 Leancloud 国内版用户的话，除了 <code>LEAN_ID</code>、 <code>LEAN_KEY</code> 和 <code>LEAN_MASTER_KEY</code> 之外，还需要设置 <code>LEAN_SERVER</code> 环境变量，值为你的应用后台绑定的接入域名。</p></div><h2 id="迁移至-cloudbase" tabindex="-1"><a class="header-anchor" href="#迁移至-cloudbase"><span>迁移至 Cloudbase</span></a></h2><p>如果你想要将你的 Valine 数据迁移至腾讯云开发的云数据库中的话，可以使用 LeanCloud 的导出功能配合云数据库的导入功能完成。在 LeanCloud 后台选择 <kbd>导入导出</kbd> &gt; <kbd>限定 Class</kbd> &gt; <kbd>Comment</kbd> &gt; <kbd>导出</kbd>，之后会收到导出成功的邮件。</p><p>将导出成功的文件内容粘贴至下方的文本框中，点击下方的转换按钮，获得待导入的文件。进入 <a href="https://console.cloud.tencent.com/tcb/db/index" target="_blank" rel="noopener noreferrer">腾讯云开发后台 → 数据库</a> 界面，选择 <code>Comment</code> 集合。若该集合不存在，点击左上角 <kbd>新建集合</kbd> 创建。进入后点击上方的导入按钮，选择刚才获得的转换后文件稍待片刻即可完成导入。</p>',4)),F(l.MigrationTool),u[21]||(u[21]=a('<h2 id="waline-亮点" tabindex="-1"><a class="header-anchor" href="#waline-亮点"><span>Waline 亮点</span></a></h2><p>Waline 相对于 Valine 具有如下亮点:</p><h3 id="更强大的功能" tabindex="-1"><a class="header-anchor" href="#更强大的功能"><span>更强大的功能</span></a></h3><ol><li>Markdown 支持更多语法，包括上下角标、emoji、表格、删除线、数学公式、HTML 标签、脚注等。</li><li>图片上传功能，允许自由配置图床服务或直接嵌入图片。</li><li>全新的标签系统，可以根据用户互动频率为用户设置等级标签，也可为登录用户添加自定义标签。</li><li>Emoji 预设与选项卡支持，允许多套 Emoji，同时允许任何人发布和使用 Emoji 预设。</li><li>全新的反应系统，允许访客表达对文章的态度。</li><li>评论点赞，对喜欢的评论表达支持。</li><li>浏览量统计，更加准确的浏览量计数与防篡改。</li><li>表情包搜索。可以自定义表情包服务，让用户搜索并自由插入表情包。</li><li>支持登录用户编辑和删除其发布的评论。</li></ol><h3 id="更安全" tabindex="-1"><a class="header-anchor" href="#更安全"><span>更安全</span></a></h3><ol><li>零隐私泄露，不会暴露用户邮箱、IP 地址以及其他敏感信息，并且可以在后台配置不显示用户地理位置、浏览器以及操作系统。</li><li>完整的反垃圾和防灌水系统。 <ul><li>所有评论都可以通过反垃圾服务进行鉴别，并且可以添加自己的额外验证逻辑。</li><li>可设置单 IP 或者单用户的评论速度限制，并自动识别重复评论，防止灌水。</li></ul></li><li>评论审核功能，在敏感时期或者网站受到攻击时，可以一键开启评论审核，手动审查并批准评论显示，防止恶意评论导致封站。</li><li>支持用户登录，除了注册账号外，还支持社交媒体账号一键授权登录，快速同步头像与昵称，防止身份冒用</li></ol><h3 id="更方便" tabindex="-1"><a class="header-anchor" href="#更方便"><span>更方便</span></a></h3><ol><li>多种方式 (QQ、微信、钉钉、邮箱) 等通知博主评论动态</li><li>强大的管理后台，可以查看所有用户与评论并进行相关操作，同时为用户设置自定义标签与管理员</li><li>前端管理，管理员可以直接通过 Waline 评论组件审查、编辑或删除评论。</li></ol>',8))])}const b=p(D,[["render",m],["__file","valine.html.vue"]]),f=JSON.parse('{"path":"/migration/valine.html","title":"从 Valine 迁移","lang":"zh-CN","frontmatter":{"title":"从 Valine 迁移","icon":"valine","description":"由于 Waline 在存储上完全复用了 Valine 的数据结构，所以从 Valine 迁移至 Waline 非常简单。 按照 一节部署服务端。LEAN_ID 和 LEAN_KEY 和之前使用 Valine 申请的保持一致即可。同时请不要忘记为 Waline 设置 LEAN_MASTER_KEY。 按照 一节修改对应的前端脚本。 注意 你需要替换 ne...","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://waline.js.org/en/migration/valine.html"}],["meta",{"property":"og:url","content":"https://waline.js.org/migration/valine.html"}],["meta",{"property":"og:site_name","content":"Waline"}],["meta",{"property":"og:title","content":"从 Valine 迁移"}],["meta",{"property":"og:description","content":"由于 Waline 在存储上完全复用了 Valine 的数据结构，所以从 Valine 迁移至 Waline 非常简单。 按照 一节部署服务端。LEAN_ID 和 LEAN_KEY 和之前使用 Valine 申请的保持一致即可。同时请不要忘记为 Waline 设置 LEAN_MASTER_KEY。 按照 一节修改对应的前端脚本。 注意 你需要替换 ne..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-01-06T18:20:44.000Z"}],["meta",{"property":"article:modified_time","content":"2024-01-06T18:20:44.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"从 Valine 迁移\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-01-06T18:20:44.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"迁移至 Cloudbase","slug":"迁移至-cloudbase","link":"#迁移至-cloudbase","children":[]},{"level":2,"title":"Waline 亮点","slug":"waline-亮点","link":"#waline-亮点","children":[{"level":3,"title":"更强大的功能","slug":"更强大的功能","link":"#更强大的功能","children":[]},{"level":3,"title":"更安全","slug":"更安全","link":"#更安全","children":[]},{"level":3,"title":"更方便","slug":"更方便","link":"#更方便","children":[]}]}],"git":{"createdTime":1604829615000,"updatedTime":1704565244000,"contributors":[{"name":"Mr.Hope","email":"mister-hope@outlook.com","commits":11},{"name":"Mr.Hope","email":"zhangbowang1998@gmail.com","commits":2}]},"readingTime":{"minutes":3.84,"words":1151},"filePathRelative":"migration/valine.md","localizedDate":"2020年11月8日","autoDesc":true}');export{b as comp,f as data};
